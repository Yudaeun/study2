<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        let xhr=null;
        
        function getXHR(){
            xhr=new XMLHttpRequest();
        }
        function getData(){
            getXHR();
            xhr.open('get','first.txt',true);
            //Client에서 Server로 요청을 보내는 방식이 Get이고, Server에서 받아오는
            //데이터가 first.txt이고, 비동기(=true) 방식으로 데이터를 요청한다. 
            xhr.onreadystatechange=callback;
            xhr.send(null); //비동기 요청을 전송한다. 요청방식이 GET이면 무조건 null로 넣어준다.

        }
        function postData(){
            getXHR();
            xhr.open('post','firsts.xtx',true);
            xhr.onreadystatechange=callback;
            xhr.send();//요청 방식이 post이면 server로 전달할 파라미터를 넣어준다.
            //지금은 전달할 데이터가 없으니까 안 넣음
        }
        //readyState 값이 바뀔 때마다 자동 호출되는 함수
        function callback(){
            if(xhr.readyState==4&&xhr.status==200){
                let result=document.getElementById('result');
                result.value=xhr.responseText;
            }
        }
    </script>
</head>
<body>
    <h1>Ajax Test</h1>
    <button onclick="getData()">get data</button>
    <button onclick="postData()">post data</button>
    <hr>
    <textarea id="result" rows="10" cols="30"></textarea>
</body>
</html>